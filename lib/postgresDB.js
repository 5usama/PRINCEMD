// PRINCE PROPERTY DON'T TOUCH IT OTHERWISE YOU WILL BE FAMOUS IN THE DEPLOYERS AS A CODE THEIF AND JUNIOR DEVELOPER






const _0x50afea=_0x12f5;(function(_0x372b83,_0x3b18e9){const _0x4d2a68=_0x12f5;const _0x53b0c3=_0x372b83();while(!![]){try{const _0x7df8f9=-parseInt(_0x4d2a68(0xdf))/(-0x7*0x248+-0x6*-0x156+0x7f5*0x1)+-parseInt(_0x4d2a68(0xe1))/(-0x19f6+0x29*-0x1c+0x1e74)+-parseInt(_0x4d2a68(0xdb))/(0x14ce*-0x1+-0x154f+0x2a20)+-parseInt(_0x4d2a68(0xee))/(0x2f5*0xd+0xd01*0x3+-0x4d70)+parseInt(_0x4d2a68(0x8e))/(0x742+-0xe95+0x8*0xeb)+parseInt(_0x4d2a68(0xf5))/(0x8d*-0x2b+-0x1832+0x2fe7)*(-parseInt(_0x4d2a68(0xe7))/(-0xad*0x29+-0x1ddd+-0x1333*-0x3))+parseInt(_0x4d2a68(0xf7))/(0x1*0x80b+-0x14d3+-0xa4*-0x14);if(_0x7df8f9===_0x3b18e9){break;}else{_0x53b0c3['push'](_0x53b0c3['shift']());}}catch(_0x3939aa){_0x53b0c3['push'](_0x53b0c3['shift']());}}}(_0x100d,0x10*-0x38d4+-0x415cc*0x1+0xfc614));function _0x12f5(_0x5aec37,_0x41a5f4){const _0x1b6b68=_0x100d();_0x12f5=function(_0x4ce2dd,_0x3acb4c){_0x4ce2dd=_0x4ce2dd-(0x8fc+-0x2201+-0x1*-0x1985);let _0x383a21=_0x1b6b68[_0x4ce2dd];return _0x383a21;};return _0x12f5(_0x5aec37,_0x41a5f4);}import _0x3c6294 from'pg';function _0x100d(){const _0x94f41f=['KSNxy','to_regclass','ZsjNr','FXTyX','\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20public.data\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20key\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20value\x20JSONB\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20TIMESTAMP\x20DEFAULT\x20NOW()\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20','rfPFV','XcFfn','2433894iTbqOW','wgpLC','emqjD','Mjnhd','247057QsciFr','query','1630290avyjlL','ISqCR','MqJTu','PlzFL','SELECT\x20to_regclass(\x27public.data\x27);','update','40775agionI','Table\x20does\x20not\x20exist','hLmiY','voZPu','HvdjV','PostgreSQL\x20connection\x20failed\x20after\x20multiple\x20attempts.','vDFrZ','1607516fzHxhl','stringify','fGMKr','IdKgj','SELECT\x20key,\x20value\x20FROM\x20public.data','MFoCh','log','972ggksjd','sslmode','28422168yttzaJ','connectWithRetry','dZNRL','Invalid\x20data.\x20Must\x20be\x20a\x20non-empty\x20object.','end','smxkt','eUeIu','split','_data','rows','nHdJm','pool','iqZJC','connect','reduce','rPBbo','997570shSGNK','STBSR','Visqk','kpeTY','Error\x20reading\x20data\x20from\x20PostgreSQL:','VIUbp','TIiUM','zpBEp','mfouX','nDoHh','read','error','Ygxkp','eNdri','sUizU','TLqfy','rejectUnauthorized','object','eKRGJ','Failed\x20to\x20initialize\x20PostgreSQL:','gCQLa','wwKuV','options','ZlJDk','init','bMbUc','PneDA','require','nbwaY','nGnjm','PostgreSQL\x20connectedâœ…','DbNBe','close','entries','READ','gKSLr','YqGun','stack','message','CeQGN','izQNb','qCleT','hAFyc','jWXoe','RcWnH','TeYzK','url','value','uqQtm','PBFMs','BUGVY','Wrote\x20data\x20to\x20PostgreSQL\x20for\x20key:\x20','gvHHL','bBmqx','key','Data\x20saved\x20to\x20PostgreSQL.','jkjXe','write','DwUks','data','Error\x20writing\x20to\x20PostgreSQL:','Error\x20closing\x20PostgreSQL\x20connection\x20pool:','PTiLo','pDaRp','PostgreSQL\x20table\x20ensured.','NMVAO','CzGlm','PostgreSQL\x20connection\x20failed.\x20Retries\x20left:\x20','JzZHz','YjQIP'];_0x100d=function(){return _0x94f41f;};return _0x100d();}const {Pool}=_0x3c6294;export class PostgresDB{constructor(_0x122055,_0x4455bd={}){const _0x33c366=_0x12f5;const _0x5b3467={};_0x5b3467[_0x33c366(0xd3)]=_0x33c366(0xa9);const _0x4d3158=_0x5b3467;this[_0x33c366(0xbc)]=_0x122055;this['options']=_0x4455bd;const _0x39247a={};_0x39247a[_0x33c366(0x9e)]=![];_0x39247a[_0x33c366(0xf6)]=_0x4d3158[_0x33c366(0xd3)];this[_0x33c366(0x89)]=new Pool({'connectionString':this[_0x33c366(0xbc)],'ssl':_0x39247a,...this['options']});this[_0x33c366(0xc9)]=this[_0x33c366(0x86)]={};this[_0x33c366(0xb0)]=null;}async[_0x50afea(0xa6)](){const _0x2a5b0f=_0x50afea;const _0x5ee5c7={};_0x5ee5c7[_0x2a5b0f(0x9d)]=_0x2a5b0f(0x81);_0x5ee5c7[_0x2a5b0f(0xbf)]='Initializing\x20PostgreSQL...';_0x5ee5c7[_0x2a5b0f(0xd9)]=_0x2a5b0f(0xce);_0x5ee5c7[_0x2a5b0f(0x88)]=_0x2a5b0f(0xe5);_0x5ee5c7[_0x2a5b0f(0xa8)]=function(_0x505e9f,_0x5dc762){return _0x505e9f===_0x5dc762;};_0x5ee5c7[_0x2a5b0f(0xab)]=_0x2a5b0f(0xa3);_0x5ee5c7['ZlJDk']=_0x2a5b0f(0xe8);_0x5ee5c7[_0x2a5b0f(0x83)]='Table\x20\x22public.data\x22\x20exists.';_0x5ee5c7[_0x2a5b0f(0xd4)]=_0x2a5b0f(0x84);_0x5ee5c7['JzZHz']='zfpTZ';_0x5ee5c7[_0x2a5b0f(0xe2)]=_0x2a5b0f(0xa1);const _0x59588d=_0x5ee5c7;try{console[_0x2a5b0f(0xf4)](_0x59588d[_0x2a5b0f(0xbf)]);await this[_0x2a5b0f(0xf8)]();const _0x3dbd20=_0x2a5b0f(0xd8);await this[_0x2a5b0f(0x89)][_0x2a5b0f(0xe0)](_0x3dbd20);console[_0x2a5b0f(0xf4)](_0x59588d[_0x2a5b0f(0xd9)]);const _0x2f5899=_0x59588d[_0x2a5b0f(0x88)];const _0x1970c2=await this[_0x2a5b0f(0x89)][_0x2a5b0f(0xe0)](_0x2f5899);if(_0x59588d['PneDA'](_0x1970c2['rows'][0x22b*0x5+-0x2209+0x1732][_0x2a5b0f(0xd5)],null)){if(_0x59588d[_0x2a5b0f(0xab)]===_0x59588d[_0x2a5b0f(0xab)]){console[_0x2a5b0f(0x99)]('Table\x20\x22public.data\x22\x20does\x20not\x20exist!');throw new Error(_0x59588d[_0x2a5b0f(0xa5)]);}else{_0x1e01c5[_0x2a5b0f(0x99)]('Table\x20\x22public.data\x22\x20does\x20not\x20exist!');throw new _0x354928(_0x2a5b0f(0xe8));}}console['log'](_0x59588d[_0x2a5b0f(0x83)]);await this[_0x2a5b0f(0x98)]();}catch(_0x4f57b1){if(_0x59588d[_0x2a5b0f(0xa8)](_0x59588d[_0x2a5b0f(0xd4)],_0x59588d[_0x2a5b0f(0xd2)])){throw new _0x3a5036(_0x59588d[_0x2a5b0f(0x9d)]);}else{console[_0x2a5b0f(0x99)](_0x59588d[_0x2a5b0f(0xe2)],_0x4f57b1[_0x2a5b0f(0xb4)]);throw _0x4f57b1;}}}async[_0x50afea(0xf8)](){const _0x8e62e5=_0x50afea;const _0x3191a2={'pDaRp':function(_0x31ecd7,_0x4b0bd9){return _0x31ecd7(_0x4b0bd9);},'hLmiY':'3|0|1|4|2','YUvwd':function(_0x3b072a,_0x197b79){return _0x3b072a(_0x197b79);},'XcFfn':function(_0x2c86fc,_0x2d877b){return _0x2c86fc>_0x2d877b;},'dZNRL':function(_0x282d3a,_0x170900){return _0x282d3a===_0x170900;},'iqZJC':'JJYWK','CeQGN':function(_0x742890,_0x30541b){return _0x742890!==_0x30541b;},'zpBEp':_0x8e62e5(0xdc),'eNdri':_0x8e62e5(0xe3),'emqjD':function(_0x293403,_0x4f5ded){return _0x293403-_0x4f5ded;},'pjDpE':_0x8e62e5(0xd0),'HvdjV':_0x8e62e5(0xde)};let _0x2c7f08=0x2460+0x81*-0x2+-0x2359;const _0x4d33c8=0x3*-0x201+-0xe3*0x1+0x129e;while(_0x3191a2[_0x8e62e5(0xda)](_0x2c7f08,0x12f8+-0x2c*-0x9f+-0xb93*0x4)){if(_0x3191a2[_0x8e62e5(0x80)](_0x8e62e5(0xea),_0x3191a2[_0x8e62e5(0x8a)])){const _0x1ad887={'YqGun':function(_0x47c225,_0x5d4071){const _0x5af489=_0x8e62e5;return _0x3191a2[_0x5af489(0xcd)](_0x47c225,_0x5d4071);}};return new _0x129d4f(_0x4c5a6f=>_0x199fc5(async()=>{const _0x25b17c=_0x8e62e5;if(!this['READ']){_0x1ad887[_0x25b17c(0xb2)](_0x3469dc,this);_0x4c5a6f(this[_0x25b17c(0xc9)]||this['read']());}},0x20df+-0x1*0x40b+-0x18ec));}else{try{if(_0x3191a2[_0x8e62e5(0xb5)](_0x3191a2[_0x8e62e5(0x95)],_0x3191a2[_0x8e62e5(0x9b)])){await this[_0x8e62e5(0x89)][_0x8e62e5(0x8b)]();console[_0x8e62e5(0xf4)](_0x8e62e5(0xac));break;}else{const _0x19db1f=_0x3191a2[_0x8e62e5(0xe9)][_0x8e62e5(0x85)]('|');let _0x550e08=0x19df+0x1b20+-0x34ff;while(!![]){switch(_0x19db1f[_0x550e08++]){case'0':this[_0x8e62e5(0xa4)]=_0x12bdc0;continue;case'1':const _0x1513fc={};_0x1513fc['rejectUnauthorized']=![];_0x1513fc[_0x8e62e5(0xf6)]='require';this[_0x8e62e5(0x89)]=new _0x5a8f7f({'connectionString':this[_0x8e62e5(0xbc)],'ssl':_0x1513fc,...this['options']});continue;case'2':this[_0x8e62e5(0xb0)]=null;continue;case'3':this[_0x8e62e5(0xbc)]=_0x45709e;continue;case'4':this[_0x8e62e5(0xc9)]=this['_data']={};continue;}break;}}}catch(_0x3f9288){console[_0x8e62e5(0x99)](_0x8e62e5(0xd1)+_0x3191a2[_0x8e62e5(0xdd)](_0x2c7f08,0x154e+-0xf1*0x24+0x1*0xc97),_0x3f9288['message']);_0x2c7f08-=0xf4e+0x1be9*0x1+-0x2*0x159b;if(_0x3191a2[_0x8e62e5(0x80)](_0x2c7f08,0x1*-0xd63+-0x1a3f+0x3*0xd36)){if(_0x3191a2[_0x8e62e5(0xb5)](_0x3191a2['pjDpE'],_0x3191a2[_0x8e62e5(0xeb)])){throw new Error('PostgreSQL\x20connection\x20failed\x20after\x20multiple\x20attempts.');}else{_0x3191a2['pDaRp'](_0x4cb9c3,this);_0x3191a2['YUvwd'](_0x5b7190,this['data']||this[_0x8e62e5(0x98)]());}}await new Promise(_0x468cc3=>setTimeout(_0x468cc3,_0x4d33c8));}}}}async['read'](){const _0x3d5b3d=_0x50afea;const _0x329ccd={'XnRpS':function(_0xaae9d0,_0x1e6094){return _0xaae9d0(_0x1e6094);},'hAFyc':_0x3d5b3d(0xcb),'PTiLo':_0x3d5b3d(0xb9),'FXTyX':'Failed\x20to\x20initialize\x20PostgreSQL:','MFoCh':function(_0x16f55f,_0x3f7b57){return _0x16f55f===_0x3f7b57;},'DbNBe':_0x3d5b3d(0x8f),'bBmqx':_0x3d5b3d(0xf0),'nDoHh':'Data\x20loaded\x20from\x20PostgreSQL.','aQNBy':_0x3d5b3d(0x92),'rPBbo':function(_0x46eb4b,_0x18bc8d){return _0x46eb4b!==_0x18bc8d;},'bMbUc':_0x3d5b3d(0xc6)};if(this[_0x3d5b3d(0xb0)]){return new Promise(_0x2e1908=>setInterval(async()=>{const _0x98adab=_0x3d5b3d;if(!this['READ']){clearInterval(this);_0x329ccd['XnRpS'](_0x2e1908,this[_0x98adab(0xc9)]||this['read']());}},0x1a1*-0x7+-0x601+0x1550));}this[_0x3d5b3d(0xb0)]=!![];try{if(_0x329ccd[_0x3d5b3d(0xf3)](_0x329ccd[_0x3d5b3d(0xad)],_0x329ccd[_0x3d5b3d(0xc3)])){_0x351b63[_0x3d5b3d(0x99)](_0x329ccd[_0x3d5b3d(0xb8)],_0x127f7b['message']);}else{const _0x2c0b90=await this[_0x3d5b3d(0x89)][_0x3d5b3d(0xe0)](_0x3d5b3d(0xf2));this['_data']=_0x2c0b90[_0x3d5b3d(0x87)][_0x3d5b3d(0x8c)]((_0x24e705,_0x54051d)=>{const _0x2af59c=_0x3d5b3d;if(_0x329ccd[_0x2af59c(0xcc)]!==_0x329ccd[_0x2af59c(0xcc)]){this[_0x2af59c(0xb0)]=null;}else{_0x24e705[_0x54051d[_0x2af59c(0xc4)]]=_0x54051d[_0x2af59c(0xbd)];return _0x24e705;}},{});this['data']={'users':{},'chats':{},'stats':{},'msgs':{},'sticker':{},'settings':{},...this[_0x3d5b3d(0x86)]||{}};console['log'](_0x329ccd[_0x3d5b3d(0x97)]);}}catch(_0x5942aa){console['error'](_0x329ccd['aQNBy'],_0x5942aa[_0x3d5b3d(0xb4)]);throw _0x5942aa;}finally{if(_0x329ccd[_0x3d5b3d(0x8d)](_0x329ccd[_0x3d5b3d(0xa7)],_0x3d5b3d(0xc6))){_0x1deb73[_0x3d5b3d(0x99)](_0x329ccd[_0x3d5b3d(0xd7)],_0x46e6c5[_0x3d5b3d(0xb4)]);throw _0x39e4b4;}else{this[_0x3d5b3d(0xb0)]=null;}}return this[_0x3d5b3d(0xc9)];}async[_0x50afea(0xc7)](_0x2009d0){const _0x12e0f4=_0x50afea;const _0x240cbd={'wTWUS':_0x12e0f4(0xec),'NMVAO':function(_0x1280b0,_0x36da85){return _0x1280b0(_0x36da85);},'fItjW':function(_0x2155c6,_0x5a0df3){return _0x2155c6(_0x5a0df3);},'nbwaY':function(_0x2dac43,_0x505a26){return _0x2dac43!==_0x505a26;},'IdKgj':_0x12e0f4(0x9f),'PlzFL':_0x12e0f4(0x93),'gvHHL':_0x12e0f4(0x81),'Visqk':function(_0x5b93c3,_0x41e0c5){return _0x5b93c3===_0x41e0c5;},'eKRGJ':_0x12e0f4(0xd6),'WCWOp':_0x12e0f4(0xed),'gKSLr':_0x12e0f4(0xc5),'GZLhH':_0x12e0f4(0xca)};if(!_0x2009d0||_0x240cbd[_0x12e0f4(0xaa)](typeof _0x2009d0,_0x240cbd[_0x12e0f4(0xf1)])){if(_0x240cbd['nbwaY'](_0x240cbd[_0x12e0f4(0xe4)],_0x12e0f4(0xa2))){throw new Error(_0x240cbd[_0x12e0f4(0xc2)]);}else{throw new _0x459529(_0x240cbd['wTWUS']);}}try{if(_0x240cbd[_0x12e0f4(0x90)](_0x240cbd[_0x12e0f4(0xa0)],_0x240cbd['WCWOp'])){if(!this[_0x12e0f4(0xb0)]){_0x240cbd[_0x12e0f4(0xcf)](_0x2ba9d4,this);_0x240cbd['fItjW'](_0x57b2e5,this['data']||this[_0x12e0f4(0x98)]());}}else{const _0x507719=_0x12e0f4(0xd8);await this[_0x12e0f4(0x89)][_0x12e0f4(0xe0)](_0x507719);for(const [_0x3470fa,_0x19817d]of Object[_0x12e0f4(0xaf)](_0x2009d0)){const _0x48dce3='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20public.data\x20(key,\x20value)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20($1,\x20$2::jsonb)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT\x20(key)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20DO\x20UPDATE\x20SET\x20value\x20=\x20$2::jsonb,\x20created_at\x20=\x20NOW();\x0a\x20\x20\x20\x20\x20\x20\x20\x20';await this[_0x12e0f4(0x89)][_0x12e0f4(0xe0)](_0x48dce3,[_0x3470fa,JSON[_0x12e0f4(0xef)](_0x19817d)]);console['log'](_0x12e0f4(0xc1)+_0x3470fa);}console[_0x12e0f4(0xf4)](_0x240cbd[_0x12e0f4(0xb1)]);this[_0x12e0f4(0xc9)]={...this['data'],..._0x2009d0};return!![];}}catch(_0x50946f){console['error'](_0x240cbd['GZLhH'],_0x50946f[_0x12e0f4(0xb4)]);console[_0x12e0f4(0x99)](_0x50946f[_0x12e0f4(0xb3)]);throw _0x50946f;}}async[_0x50afea(0xe6)](_0x27db28,_0x387ca1){const _0x3e8990=_0x50afea;const _0x5556f1={};_0x5556f1['qevun']=function(_0x67c307,_0x28d46d){return _0x67c307===_0x28d46d;};_0x5556f1[_0x3e8990(0x9a)]=_0x3e8990(0xbb);_0x5556f1[_0x3e8990(0x96)]='Key\x20is\x20required\x20to\x20update\x20data.';const _0x49e3dd=_0x5556f1;if(!_0x27db28){if(_0x49e3dd['qevun'](_0x49e3dd[_0x3e8990(0x9a)],_0x49e3dd[_0x3e8990(0x9a)])){throw new Error(_0x49e3dd['mfouX']);}else{_0x5bf8c2[_0x457ac5[_0x3e8990(0xc4)]]=_0x442663[_0x3e8990(0xbd)];return _0x1329b8;}}this['data'][_0x27db28]=_0x387ca1;const _0x598c21={};_0x598c21[_0x27db28]=_0x387ca1;return this['write'](_0x598c21);}async[_0x50afea(0xae)](){const _0x2a8991=_0x50afea;const _0x15f112={};_0x15f112[_0x2a8991(0xba)]=_0x2a8991(0xca);_0x15f112[_0x2a8991(0xb7)]=_0x2a8991(0x92);_0x15f112[_0x2a8991(0xb6)]=function(_0x128baf,_0x5af4f5){return _0x128baf!==_0x5af4f5;};_0x15f112['Eewjk']=_0x2a8991(0x9c);_0x15f112[_0x2a8991(0x91)]=_0x2a8991(0x94);_0x15f112[_0x2a8991(0xc8)]='PostgreSQL\x20connection\x20pool\x20closed.';_0x15f112[_0x2a8991(0xc0)]=function(_0xaf4d43,_0x1aac3e){return _0xaf4d43!==_0x1aac3e;};_0x15f112['uqQtm']='ilmNJ';const _0x49a130=_0x15f112;try{if(_0x49a130[_0x2a8991(0xb6)](_0x49a130['Eewjk'],_0x49a130[_0x2a8991(0x91)])){await this[_0x2a8991(0x89)][_0x2a8991(0x82)]();console[_0x2a8991(0xf4)](_0x49a130['DwUks']);}else{_0x310ef2[_0x2a8991(0x99)](_0x49a130['RcWnH'],_0x5e71f0[_0x2a8991(0xb4)]);_0x3a189b[_0x2a8991(0x99)](_0x7c2442[_0x2a8991(0xb3)]);throw _0x17ea78;}}catch(_0x4666cf){if(_0x49a130[_0x2a8991(0xc0)](_0x49a130[_0x2a8991(0xbe)],_0x49a130[_0x2a8991(0xbe)])){_0x402510[_0x2a8991(0x99)](_0x49a130[_0x2a8991(0xb7)],_0x374095[_0x2a8991(0xb4)]);throw _0x20f78d;}else{console[_0x2a8991(0x99)]('Error\x20closing\x20PostgreSQL\x20connection\x20pool:',_0x4666cf[_0x2a8991(0xb4)]);}}}}
